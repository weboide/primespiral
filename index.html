<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>title</title>
    <style>
        body {
            background: #000;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.11.3/lib/p5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/liz-peng/p5.Polar@latest/p5.Polar.min.js"></script>
</head>
<body>
    <script>
        var w = window.innerWidth;
        var h = window.innerHeight;
        var scalefactor = 20

        let primes = generatePrimes(1000000);

        function setup() {
            createCanvas(w, h);
        }
        
        // Generate primes up to n
        function generatePrimes(n) {
            let primes = [];
            let isPrime = new Array(n).fill(true);
            isPrime[0] = isPrime[1] = false;
            for(let i = 2; i < n; i++) {
                if(isPrime[i]) {
                    primes.push(i);
                    for(let j = i*i; j < n; j += i) {
                        isPrime[j] = false;
                    }
                }
            }
            return primes;
        }

        function mousePressed() {
            if (mouseX > 0 && mouseX < width && mouseY > 0 && mouseY < height) {
                let fs = fullscreen();
                fullscreen(!fs);
            }
        }

        function draw() {
            scalefactor = frameCount/10
            setCenter(width/2, height/2);
            scale(1/scalefactor)
            background(0);
            fill(255);
            noStroke();
            primes.slice(frameCount/30,frameCount*15).forEach(i => {
                polarEllipse(i * (180 / Math.PI), 1*scalefactor, 1*scalefactor, i);
            });
        }

        window.onresize = function() {
            w = window.innerWidth;
            h = window.innerHeight;
            resizeCanvas(w, h);
        }
    </script>
</body>
</html>